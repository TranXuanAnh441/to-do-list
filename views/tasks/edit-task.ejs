<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/forms.css"/>
<link rel="stylesheet" href="/css/task.css"/>
</head>

<body>
    <%- include('../includes/navigation.ejs') %>
    <main>
        <form class="task-form" action="/task/<% if (editing) { %>edit-task<% } else { %>add-task<% } %>" method="POST">
            <div class="form-control">
                <label for="title">Title</label>
                <input type="text" name="title" id="title" value="<% if (editing) { %><%= task.title %><%} %>">
            </div>    
            <div class="form-control">
                <label for="content">Content</label>
                <textarea name="content" id="content"><% if (editing) { %><%= task.content %><%} %></textarea>
            </div>
            <div class="form-control">
                <label for="content">Deadline</label>
                <input type="date" name="deadline" id="deadline" value="<% if (editing) { %><%= task.deadlineStr %><%} %>">
            </div>
            <select name="status" id="status" >
                <option value="CREATED" <%= editing &&  selectedStatus === "CREATED" ? 'selected' : '' %>>CREATED</option>
                <option value="ONGOING" <%= editing &&  selectedStatus === "ONGOING" ? 'selected' : '' %>>ONGOING</option>
                <option value="FINISHED" <%= editing &&  selectedStatus === "FINISHED" ? 'selected' : '' %>>FINISHED</option>
              </select>

            <% if (editing) { %>
                <input type="hidden" value="<%= task._id %>" name="taskId" >
            <% } %>

            <button class="active" type="submit"><% if (editing) { %> Update Task <%} else { %>Add Task <% } %></button>
        </form>
    </main>

<%- include('../includes/end.ejs') %>